#!/usr/bin/env bash

if [ -x $1/bin/ruby ] then
  echo "ruby good"
fi
if [ -f $1/config/httpd.conf ] then
  echo "httpd.conf good"
fi
if [ -f $1/config/shibboleth/shibboleth2.xml ] then
  echo "config/shibboleth/shibboleth2.xml good"
fi
if [ -f $1/config/shibboleth/shibboleth2.xml.erb ] then
  echo "config/shibboleth/shibboleth2.xml.erb good"
fi

if [ -x $1/bin/ruby ] && [ -f $1/config/httpd.conf ] && ([ -f $1/config/shibboleth/shibboleth2.xml ] || [ -f $1/config/shibboleth/shibboleth2.xml.erb ]); then
  echo "Apache+Passenger+Shibboleth"
  exit 0
else
  echo "Missing ruby, httpd.conf, or shibboleth2.xml"
  exit 1
fi
